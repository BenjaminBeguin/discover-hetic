<h2 class="title-second">Update profile</h2>

<section class="update_user_wrapper">
    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>

        <div class="on_submit_feedback_forms">
             <% if !devise_error_messages!.blank? %>
                <h2 class="alert">
                    <% devise_error_messages!.each do |error| %>
                        <span><%= error %></span>
                    <% end %>
                </h2>
            <% end %>
            <div class="dismiss"></div>
        </div>
        
        <div class="fields_wrapper">
            <div class="fields_container">
                <div class="field field-avatar">
                    <p class="form_title">Upload an image as avatar</p>
                    <div class="file-input-field">
                        <% if current_user.avatar.blank? %>
                            <div class="file-input image-input" style="background-image: url(<%= set_random_avatar(current_user.id) %>)">
                        <% else %>
                            <div class="file-input image-input" style="background-image: url(<%= current_user.avatar %>)" >
                        <% end %>
                        <%= f.label :avatar, 'Drag and drop your file or click to upload' %>
                        <%= f.file_field :avatar, autofocus: true %>
                            <img src="" class="current-image" id="current-image"></span>
                        </div>
                    </div>
                </div>
                <div class="inputs_wrapper">
                    <div class="form_left">
                        <div class="field">
                            <%= f.label :email, :class => "form_title" %>
                            <%= f.email_field :email, autofocus: true, :class => "form_input" %>
                        </div>

                         <div class="field">
                            <%= f.label :name, :class => "form_title" %>
                            <%= f.text_field :name, autofocus: true, :class => "form_input" %>
                        </div>

                        <div class="field">
                            <%= f.label :desc, "description", :class => "form_title" %>
                            <%= f.text_area :desc, :class => "form_input", :id => "update_form_content"%>
                        </div>
                    </div>
                    <div class="form_right">
                        <div class="field">
                            <%= f.label :password, :class => "form_title" , :id => "update_form_new_password"%>
                            <%= f.password_field :password, autocomplete: "off", :class => "form_input", placeholder: "#{@minimum_password_length} characters minimum"%>
                        </div>

                        <div class="field">
                            <%= f.label :password_confirmation, :class => "form_title" %>
                            <%= f.password_field :password_confirmation, autocomplete: "off", :class => "form_input" %>
                        </div>

                        <div class="field">
                            <%= f.label :current_password, :class => "form_title asterisk"%>
                            <%= f.password_field :current_password, autocomplete: "off", :class => "form_input" %>
                            <p id="update_form_current_password"></p>
                        </div>
                    </div>
                </div>       

                <div class="actions">
                    <%= f.submit "Update" %>
                </div>
                <div class="additionnals_links">
                    <%= link_to "cancel your account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete %>
                </div>
            </div>
        </div>

    <% end %>
</section>



